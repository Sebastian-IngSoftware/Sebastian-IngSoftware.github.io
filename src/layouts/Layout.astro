---
import "../styles/global.css";

// obtener ruta actual de forma segura en el frontmatter
const currentPath = typeof Astro?.request !== "undefined"
  ? new URL(Astro.request.url).pathname
  : "/";

// helper para marcar activo (exacto o startsWith para /projects)
const isActive = (href: any) => {
  if (href === "/") return currentPath === "/";
  return currentPath.startsWith(href);
};
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Sebastian-IngSoftware</title>
    <link rel="stylesheet" href="/src/styles/global.css" />
  </head>
  <body class="bg-background text-text m-0 p-5 font-sans container">
    <header class="sticky top-0 z-50 bg-black">
      <div class="bg-gradient-to-br from-primary to-secondary p-4 sm:p-8 rounded-xl mb-5 border border-border">

      <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2">

        
          <div class="flex-1 min-w-0 text-center sm:text-left">
            <h1 class="m-0 text-2xl sm:text-4xl text-text font-bold">Sebastian Sarmiento</h1>
            <p class="mt-1 sm:mt-2 mb-0 text-lg sm:text-xl text-accent">Software Engineer</p>

            <div class="mt-2 flex flex-col lg:flex-row items-center sm:items-start gap-2 lg:gap-4 w-full justify-center lg:justify-start">
              <div class="w-full lg:w-auto flex flex-col sm:flex-row sm:items-center sm:gap-3 gap-1 lg:gap-4 justify-center lg:justify-start">
                <a aria-label="Email: sebastiansarmientocas@gmail.com" href="mailto:sebastiansarmientocas@gmail.com" class="inline-flex items-center gap-2 text-text-muted hover:text-accent transition text-sm min-w-0 justify-center sm:justify-start w-full sm:w-auto">
                  <svg class="hidden sm:inline-block w-4 h-4 shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M4 4h16v16H4V4zm0 0l8 8 8-8" />
                  </svg>
                  <span class="inline-block truncate max-w-[260px] sm:max-w-none">sebastiansarmientocas@gmail.com</span>
                </a>

                <a aria-label="Phone: +51 978 913 563" href="tel:+51978913563" class="inline-flex items-center gap-2 text-text-muted hover:text-accent transition text-sm min-w-0 justify-center sm:justify-start w-full sm:w-auto">
                  <svg class="hidden sm:inline-block w-4 h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 16.92V21a2 2 0 0 1-2.18 2A19.86 19.86 0 0 1 3 5.18 2 2 0 0 1 5 3h4.09a2 2 0 0 1 2 1.72c.13 1.13.37 2.24.72 3.32a2 2 0 0 1-.45 2.11l-1.27 1.27a16 16 0 0 0 6.29 6.29l1.27-1.27a2 2 0 0 1 2.11-.45c1.08.35 2.19.59 3.32.72a2 2 0 0 1 1.72 2z" stroke="currentColor" stroke-width="1"/></svg>
                  <span class="inline-block truncate max-w-[200px] sm:max-w-none">+51 978 913 563</span>
                </a>
              </div>

              <div class="w-full lg:w-auto flex items-center justify-center lg:justify-start gap-3">
                <a aria-label="LinkedIn: Sebastian Sarmiento" href="https://www.linkedin.com/in/sebastian-sarmiento-4a3b64204" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-text-muted hover:text-accent transition text-sm">
                  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.761 0 5-2.239 5-5v-14c0-2.761-2.239-5-5-5zm-11 19h-3v-10h3v10zm-1.5-11.268c-.966 0-1.75-.784-1.75-1.75s.784-1.75 1.75-1.75 1.75.784 1.75 1.75-.784 1.75-1.75 1.75zm13.5 11.268h-3v-5.604c0-1.337-.026-3.063-1.867-3.063-1.868 0-2.154 1.459-2.154 2.967v5.7h-3v-10h2.881v1.367h.041c.401-.761 1.381-1.563 2.843-1.563 3.041 0 3.604 2.003 3.604 4.605v5.591z"/></svg>
                  <span class="hidden sm:inline">LinkedIn</span>
                </a>

                <a aria-label="GitHub: Sebastian-IngSoftware" href="https://github.com/Sebastian-IngSoftware" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-text-muted hover:text-accent transition text-sm">
                  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 .5C5.73.5.5 5.73.5 12c0 5.08 3.29 9.38 7.86 10.9.58.11.79-.25.79-.56 0-.28-.01-1.02-.02-2-3.2.7-3.88-1.54-3.88-1.54-.53-1.36-1.3-1.72-1.3-1.72-1.06-.72.08-.7.08-.7 1.17.08 1.78 1.2 1.78 1.2 1.04 1.78 2.72 1.27 3.38.97.1-.75.41-1.27.74-1.56-2.55-.29-5.24-1.28-5.24-5.72 0-1.26.45-2.29 1.19-3.1-.12-.29-.52-1.47.11-3.06 0 0 .97-.31 3.17 1.18.92-.26 1.9-.39 2.88-.39.98 0 1.96.13 2.88.39 2.19-1.49 3.16-1.18 3.16-1.18.64 1.59.24 2.77.12 3.06.74.81 1.19 1.84 1.19 3.1 0 4.45-2.7 5.43-5.27 5.71.42.36.8 1.08.8 2.18 0 1.57-.01 2.84-.01 3.22 0 .31.21.68.8.56C20.71 21.38 24 17.08 24 12c0-6.27-5.23-11.5-12-11.5z"/></svg>
                  <span class="hidden sm:inline">GitHub</span>
                </a>
              </div>
            </div>
          </div>

          <div class="flex items-center gap-2 sm:gap-2">
            <a
              aria-label="Download CV (PDF)"
              href="/Sebastian Sarmiento CV.pdf"
              target="_blank"
              class="bg-accent text-background px-4 py-2 sm:px-6 sm:py-3 rounded-lg no-underline font-bold transition-all duration-300 border-2 border-accent flex items-center gap-2 hover:bg-transparent hover:text-accent w-full sm:w-auto justify-center"
            >
              <span>ðŸ“„</span>
              <span>Download CV</span>
            </a>
          </div>
      </div>
      </div>
      
      <nav class="flex w-full text-center border-b border-border mb-10">
        <a
        href="/"
        class={`w-1/2 py-3 text-lg font-semibold transition-all duration-200 flex items-center justify-center
          ${isActive('/') 
          ? 'bg-accent text-background border-b-4 border-accent' 
          : 'text-text-muted hover:bg-accent hover:text-background'}`}
      >
      Skills
    </a>
    
    <a
    href="/projects"
    class={`w-1/2 py-3 text-lg font-semibold transition-all duration-200 flex items-center justify-center
          ${isActive('/projects')
          ? 'bg-accent text-background border-b-4 border-accent'
          : 'text-text-muted hover:bg-accent hover:text-background'}`}
      >
      Projects
    </a>
  </nav>
</header>

    <slot />

    <div class="bg-surface p-4 rounded-lg border-l-4 border-l-success flex items-center gap-3 mt-5">
      <div class="w-2 h-2 bg-success rounded-full"></div>
      <span class="text-text">Available for new opportunities</span>
    </div>
  </body>
</html>
